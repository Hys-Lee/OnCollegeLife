누가 죽었고 살았을지 예측

test에는 survived컬럼이 없음
train을 기반으로 분석하고 test의 survived를 맞춰볼 것

##각 컬럼에 대한 설명##
Passengerld: 각 승객 고유 넘버
Survived: 0이면 죽음, 1이면 삶
Pclass: 객실등급 ->1이 가장 비쌈 //1은 가장 높은 층에 배정됨
Name: 이름인데 규칙이 있음 Master는 미혼 성인남성, Mr, Mrs,Miss등등 있음
Age: 값이 비어있는건 걍 정보가 없는거(없앤거든)
SibSp: 형제 자매+배우자 숫자
Parch: 부모+자식    ***SibSp+Parch+1이 가족 수이겠지
Ticket: 티켓정보
Fare: 요금 (같은 객실 등급이라도 요금이 다르뎅 이유는 잘 모르지만)
Cabin: 캐비넷
Embarked: 선착장 -S, C, Q

***********
데이터 분석은
맨 처음은 간단하게 시작하자

3단계
'''
가설
검증
예측  ->test에서 예측
'''
으로 진행할 것임

0. Alldead
예측할 때마다 사본을 만들거임
시작은 다 죽었다고 시작
->캐글은 몇 퍼센트가 맞았다고 채점을 해주기 때문에 이를 통해서
생존률 확인가능


1. WlivedMdead
->여성은 살고 남성은 죽는다로 가설
->피봇 테이블로 분석 =>값은 sum과 count로 2개 넣어줘야함
->이렇게 넣고 캐글돌리기
*참고로 if문을 사용하면 E열을 참조하기 때문에 E열을 지우면 문제가 발생
->값으로 덮어쓰기 위해 B열 복사하고 값만붙여넣기하면 됨

2. Sex+Pclass
//성별로 따지는게 가장 효과가 좋데 이 사건에선.
죽일 여성을 찾고 살릴 남성을 찾자 이제.
=>Pclass의 영향을 추가하자
**참고로 행에 Pclass추가할 건데, 오류나는건 표에 겹쳐서 그런거니 표를 깨끗하게 비워주면 됨
->여자 3클래스는 50%만 삶->test에서도 이와 비슷할텐데, 
이 퍼센트를 절대적으로 봐야함->여성은 50%보다 생존률이 낮은 사람들을 죽여야
캐글 점수가 좋게 나올 것
->반대로 남성은 50%보다 생존률이 높은 조건을 찾아서 살려야겠지
(**여성 3클래스는 정확하게 50%임->물론 train에서의 결과지만
->만약 50%라면 이들을 죽이던 살리던 채점에 영향은 없겠지)

=>if문 중첩사용 여성중 Pclass==3이면 죽이도록
---->0.76에서 0.77로 점수가 올랐넹 
      즉, Pclass=3인 여성중에서 죽은사람이 더 많았다 
       즉, 50%보다 생존률이 낮았다는 것임
      그러나 크게 차이나지는 않을것
     ==>이렇게 애매할 때는 다른 조건을 먼저 찾자.
         예를 들어 30%나 40%등 정도 되는것으로
      =>혹은 이 집단을 세분화 시켜서 각 집단을 관찰

3. 
괜찮은 조건으로 나이를 생각해보자.
피벗테이블에서 봤을 때 분포가 많고 각각이라 형태가 마음에 안듦
->이를 그룹핑해서 보기좋게 정렬하자
(요금도 이렇게 분포가 많아서 그룹핑해야함)

10살 미만:어리다 / 10살 이상:어리지ㅏ 않다로 나눈다.
->새로운 데이터를 다시 만들어야함(어리다 어리지않다로)
 그니까 피벗테이블 끄고 새로 만들어야함
**스프레드시트 이용할 때 새로운 컬럼만들어서 자동채우기 할꺼면
꽉 찬열의 오른쪽에 만들어야 좋음

근데 age에서 비어있는건 1로 나왐
->이 비어있는걸 1로 둘지 0으로 둘지 선택해야함.혹은 따로 분류하든(나중에)
   (0으로 만들라면 조건문에 and(g2<10,g2>0)로 바꿔야함 빈거를 0으로 보기 때문에

암튼 이렇게 새로운 컬럼만들고 전체 선택하고 피벗테이블로 만들어서
어리다와 어리지않다로 나누면 됨

눈에 띄는 퍼센트 44%, 61%를 보자. 
44%는 여성 중에서 3클래스의 어리지 않은 생존률 이들을 죽이면 
점수가 오를지도?(근데 test와 train의 오차 범위가 있어서 어케될지는 잘 모름 해봐야 앎)
남성중 2클래스의 어리다는 생존률이 61%임
이 사람들을 살린다고 test에서 바꾸면 점수가 올라갈 것이라 기대 가능

if를 3중첩을 해도 되고, and를 이용해도 됨
=if(E2="female",if(C2=3,if(F2<10,1,0),1),0) : if3중첩
or
=if(E2="female",if(and(C2=3,F2>=10),0,1),0) : and

이거 돌리면 오히려 정답률 감소함
따라서 오차생각해서 어느정도 50%에서 좀 되게 차이나는 것을 찾아야함

///참고로 여기선 최대 5중첩으로만 쓰자 -> 왜냐면 5중첩에 다 속한 사람이 많아봤자 10명일 것임
왜냐면 조건이 되는 인원수가 너무 적기 때문임


/////////////////////////실습/////////////////////////////
age는 바꾸지 말고 
Embarked한번 볼까
->여성 3클래스 어리든어리지않든 S :죽이자
->남성 2클래스 어린사람 ->의미 없음 : 살리자
0.77272로 0.001상승...

+

Fare한번 살펴보자 Pclass랑 연관이 많은건지 보게
여성은 Embarked안하고 rich로 바꾸자
남성은 다 적용시키고
->여성 3클래스 어리지않음 부자 : 죽이자
->남성 2클래스 어림 C:살리자
->남성 2클래스 어림 S Rich:살리자

자식수가 많으면서 결혼한 여성은 죽을 확률이 높지
즉, 일단 부모자식이 2이상일 때 죽이자
=>의미 없음

부모자식수가 없는 남성은 살 확률이 높지
->남성 1클래스 아이 부모애없음 :살리자
->남성 2클래스 어림 C:살리자
->남성 2클래스 어림 S Rich:살리자

********************
일단 위에거 재치고
주목할 대상 
1번 여성>3클래스>어리지 않음(특히 S항구):생존률낮음
2번 여성>3클래스>어림>S항구:생존률 낮음

->3클래스 S로 향한 여성중 죽은 이유는 가족이 많아서일 것



3번 남성>2클래스>어림:생존률 높음
남자는 걍 위에거대로 세분화하는게 13명 구하니까 낫지

->여성>3클래스>S>가족5명이상 : 죽이자
->남성 2클래스 어림 C:살리자 : 살리자
->남성 2클래스 어림 S:살리자 : 살리자
=====>0.77511

-------------------------------------
가장 높은사람 0.787...
1. 가족 많으면 죽음
2. 남성>마스터가 아니면 죽음
->남성 5가지
3. 여성은 S로 가면 죽음
->여성 4가지

조건이 너무 많게 잘못해도 점수가 낮게 나옴
최대한 적게 써서 좋게 만들어야지.

#################
대표적인 솔루션 age가장 좋은건 0<age<10
남자는 Family랑 Master
여성 embarked S



====================================
파이썬 사용
판다스 사용할 때 컬럼 중 인덱스 지정
read_csv에서 index_col를 인자로 추가하면 됨

참고로 Ebarked중엔 S가 가장 많고
Pclass중엔 3이 가장 많음
즉 이들의 영향력이 크다는 거징

판다스는 왠만하면 원본을 바꾸지 않음

머신러닝 약간 사용할건데 조건이 자료가 숫자여야하고 비어있으면 안됨
->모든 자료를 숫자로 만들어야함

false는 0으로 true는 1로 인식
